<div class="card">
    <!-- Body -->
    <div class="card-body">
      <form [formGroup]="listingForm" (ngSubmit)="onSubmit(listingForm.value)" class="custom-validation mt-5" >
        <ul id="accordion" class="step custom-accordion">
            <li class="step-item">
              <div class="step-content-wrapper">
                <span class="step-icon step-icon-soft-primary">1</span>
                <div class="step-content">
                  <a class="collapsed" data-target="#filesCollapse" data-toggle="collapse" aria-expanded="false">
                    <h4>Advert Files</h4>
                    <p class="step-text fs-12">Achieve virtually any design and layout from within the one template.</p>
                  </a>
                  <div id="filesCollapse" class="collapse show mb-4" data-parent="#accordion">
                    <div class="row mt-5">
                      <div class="col-sm-12">
                        <!-- <button (click)="open()" class="btn btn-dark btn-sm">Upload Images</button> -->
                        <input (change)="onFile($event)" class="btn btn-dark btn-sm" type="file" multiple="true" accept="image/*" id="imageUploader">
                      </div>
                      <div class="col-sm-2 p-1" *ngFor="let img of images">
                        <img class="img-fluid" [src]="img" alt="Image Description">
                      </div>
                      <!-- <label class="col-sm-3 col-form-label form-label">Profile photo</label>
            
                      <div class="col-sm-9">
                        <div class="d-flex align-items-center">
                          <label class="avatar avatar-xl avatar-circle" for="avatarUploader">
                            <img id="avatarImg" class="avatar-img"  alt="Image Description">
                          </label>
            
                          <div class="d-grid d-sm-flex gap-2 ms-4">
                            <div class="form-attachment-btn btn btn-primary btn-sm">Change photo
                              <input type="file" class="js-file-attach form-attachment-btn-label" id="avatarUploader">
                            </div>
                          </div>
                        </div>
                      </div> -->
                      
                    </div>
                  </div>
                </div>
              </div>
            </li>
          
            <li class="step-item">
              <div class="step-content-wrapper">
                <span class="step-icon step-icon-soft-primary">2</span>
                <div class="step-content">
                  <a class="collapsed" data-target="#advertCollapse" data-toggle="collapse" aria-expanded="false">
                    <h4>Second step</h4>
                    <p class="step-text">We strive to figure out ways to help your business grow through all platforms.</p>
                  </a>
                  <div id="advertCollapse" class="collapse" data-parent="#accordion">
                    <div class="mb-3">
                      <div class="row">
                        <div class="col-md-4">
                          <label class="form-label">Country</label>
                            <select class="form-control" formControlName="country">
                              <option value="" disabled>Choose a Country</option>
                              <option value="Ghana">Ghana</option>
                                  <!-- <option  *ngFor="let category of _listingservices?.categories">{{category?.name | titlecase}}</option> -->
                            </select>
                          </div>
                            <div class="col-md-4">
                                <label class="form-label">Region</label>
                                <select class="form-control" formControlName="region">
                                    <option value="" disabled>Choose a Region</option>
                                    <option value="Greater Accra">Greater Accra</option>
                                          <!-- <option  *ngFor="let category of _listingservices?.categories">{{category?.name | titlecase}}</option> -->
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Gender</label>
                                <select class="form-control" formControlName="gender">
                                  <option value="" disabled>Choose your Gender</option>
                                  <option value="Male">Male</option>
                                  <option value="Female">Female</option>
                                  <!-- <option  *ngFor="let category of _listingservices?.categories">{{category?.name | titlecase}}</option> -->
                              </select>
                          </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">City</label>
                        <select class="form-control" formControlName="city">
                          <option value="" disabled>Choose your City</option>
                          <option value="Accra">Accra</option>
                          <!-- <option  *ngFor="let category of _listingservices?.categories">{{category?.name | titlecase}}</option> -->
                      </select>
                    </div>
                    <!-- <div class="mb-3">
                        <label class="form-label">Description / Summary</label>
                        <textarea class="form-control" placeholder="..." rows="5" formControlName="description"></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Listing Tags</label>
                        <select class="form-control" formControlName="tags">
                            <option value="">Choose various tags</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Brands</label>
                        <select class="form-control" formControlName="brands">
                            <option value="">Choose a band name</option>
                        </select>
                    </div>
                    <br />
                    <br /> -->
                  </div>
                </div>
              </div>
            </li>
          
            <li class="step-item">
              <div class="step-content-wrapper">
                <span class="step-icon step-icon-soft-primary">3</span>
                <div class="step-content">
                  <a class="collapsed" data-target="#advertCollapse1" data-toggle="collapse" aria-expanded="false">
                    <h4>Third step</h4>
                    <p class="step-text">Find what you need in one template and combine features at will.</p>
                  </a>
                  <div id="advertCollapse1" class="collapse" data-parent="#accordion">
                    <div class="mb-3">
                        <label class="form-label">Ad Name / Title</label>
                        <input type="text" class="form-control" placeholder="Type something" formControlName="name">
                    </div>
                    <div class="mb-3">
                        <div class="row">
                            <div class="col-md-4">
                                <label class="form-label">Price</label>
                                <input type="text" class="form-control" placeholder="Type something" formControlName="price">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Category</label>
                                <select class="form-control" formControlName="category" (change)="selectSubCategories()">
                                    <option value="" disabled>Choose a Category</option>
                                    <option *ngFor="let category of _listingservices?.categories">{{category?.name | titlecase}}</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Sub Category</label>
                                <select class="form-control" formControlName="subcategory">
                                    <option value="" disabled>Choose a Sub Category</option>
                                    <option  *ngFor="let subcategory of subCategories">{{subcategory?.name | titlecase}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Description / Summary</label>
                        <textarea class="form-control" placeholder="..." rows="5" formControlName="description"></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Listing Tags</label>
                        <select class="form-control" formControlName="tags">
                            <option value="" disabled>Choose various tags</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Brands</label>
                        <select class="form-control" formControlName="brands">
                            <option value="" disabled>Choose a band name</option>
                        </select>
                    </div>
                    <br />
                    <br />
                    <h4 class="text-danger bold fs-14">Featured / Promoted Information</h4>
                    <br />
                    <div class="mb-3">
                        <div class="row">
                            <div class="col-md-5">
                                <label class="form-label">Promote ad ?</label>
                                <select class="form-control" formControlName="isFeatured" >
                                    <option value="false">No, this is a regular ad listing</option>
                                    <option value="true">Yes, I want to promote this ad listing</option>
                                </select>
                                <span class="text-muted fs-12">e.g "Wanted your ad to be promoted or featured ?"</span>
                            </div>
                            <div class="col-md-7" *ngIf="listingForm.value.isFeatured == 'true'">
                                <label class="form-label">Featured season</label>
                                <select class="form-control" formControlName="featuredName">
                                    <option value="" disabled>Choose a promotional / featured season or type</option>
                                    <option value="general">General (Monthly subscription cost)</option>
                                    <option value="easter">Easter Promotion</option>
                                    <option value="xmas">Xmas Promotion</option>
                                </select>
                            </div>
                        </div>
                    </div>
                  </div>

                </div>
              </div>
            </li>
        </ul>
        <!-- Footer -->
        <div class="card-footer pt-0">
          <div class="d-flex justify-content-end gap-3">
            <angular4-paystack *ngIf="listingForm.value.isFeatured == 'true' ; else elseBlock"
              [email]="_orderservices?.paystackInfo?.email"
              [amount]="_orderservices?.paystackInfo?.amount"
              [ref]="_orderservices?.paystackInfo?.ref"
              [paystackOptions]="_orderservices?.paystackInfo"
              [channels]="_orderservices?.paystackInfo?.channel"
              [class]="'btn btn-primary hidden'"
              (onClose)="_orderservices?.paymentCancel($event)"
              (callback)="onSubmit(listingForm.value, $event)"
            >
              Subscribe to Featured Listing & Save Advert
            </angular4-paystack>
            <ng-template #elseBlock>
              <button type="submit" class="btn btn-primary">Save Advert</button>
            </ng-template>
          </div>
        </div>
        <!-- End Footer -->
      </form>
    </div>

</div>
