<div class="card">
  <div class="card-header bg-img-start">
    <div class="flex-grow-1">
      <span class="d-lg-none">Step 1 of 7</span>
      <h3 class="card-header-title">Fill in your advert listing information</h3>
    </div>
  </div>
    <!-- Body -->
    <div class="card-body">
      <form [formGroup]="listingForm" (ngSubmit)="onSubmit(listingForm.value, null)" class="custom-validation mt-5" >
        <ul id="accordion" class="step custom-accordion accordion">         
            <li class="step-item">
              <div class="step-content-wrapper">
                <span class="step-icon step-icon-soft-primary">1</span>
                <div class="step-content">
                  <a class="collapsed" data-bs-target="#locationCollapse" data-bs-toggle="collapse" aria-expanded="false">
                    <h4 class="bold">Set Advert Target Location</h4>
                    <p class="step-text fs-12">We strive to figure out ways to help your business grow through all platforms.</p>
                  </a>
                  <div id="locationCollapse" class="accordion-collapse collapse show" data-bs-parent="#accordion">
                    <div class="mb-3 accordion-body">
                      <br />
                      <div class="row">
                        <div class="col-md-6">
                          <label class="form-label">Country</label>
                            <select class="form-control bg-muted" formControlName="country">
                              <option value="">Choose a Country</option>
                              <option value="Nigeria">Nigeria</option>
                            </select>
                          </div>
                        </div>
                        <div class="row mt-3">
                          <div class="col-md-6" *ngIf="listingForm.value.country">
                            <label class="form-label">Region / State</label>
                            <select (change)="selectChange()" class="form-control" formControlName="region">
                                <option value="">Choose a Region / State in {{listingForm.value.country}}</option>
                                <option *ngFor="let region of regions[listingForm.value.country]" >{{region?.state?.name}}</option>
                            </select>
                          </div>
                          <div class="col-md-6" *ngIf="listingForm.value.region">
                            <label class="form-label">City</label>
                            <select class="form-control" formControlName="city">
                              <option value="">Choose a city in {{listingForm.value.region}}</option>
                              <option *ngFor="let city of cities">{{city.name}}</option>
                            </select>
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Gender</label>
                              <select class="form-control bg-muted" formControlName="gender">
                                <option value="">Choose a Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                              </select>
                          </div>
                        </div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
          
            <li class="step-item">
              <div class="step-content-wrapper">
                <span class="step-icon step-icon-soft-primary">2</span>
                <div class="step-content">
                  <a class="collapsed" data-bs-target="#categoryCollapse" data-bs-toggle="collapse" aria-expanded="false">
                    <h4 class="bold">Choose Advert Category</h4>
                    <p class="step-text fs-12">We strive to figure out ways to help your business grow through all platforms.</p>
                  </a>
                  <div id="categoryCollapse" class="accordion-collapse collapse" data-bs-parent="#accordion">
                    <div class="mb-3 accordion-body">
                      <br />
                      <div class="row">
                        <div class="col-md-6">
                          <label class="form-label">Category</label>
                          <select class="form-control" formControlName="category" (change)="selectChange('category')">
                              <option value="">Choose a Category</option>
                              <option  *ngFor="let category of _listingservices?.categories">{{category?.name | titlecase}}</option>
                          </select>
                        </div>
                        <div class="col-md-6" *ngIf="subCategories.length > 0">
                          <label class="form-label">Sub Category</label>
                          <select class="form-control" formControlName="subcategory">
                              <option value="">Choose a Sub Category</option>
                              <option  *ngFor="let subcategory of subCategories">{{subcategory?.name | titlecase}}</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </li>

            <li class="step-item">
              <div class="step-content-wrapper">
                <span class="step-icon step-icon-soft-primary">3</span>
                <div class="step-content">
                  <a class="collapsed" data-bs-target="#filesCollapse" data-bs-toggle="collapse" aria-expanded="false">
                    <h4>Upload Images</h4>
                    <p class="step-text fs-12">Achieve virtually any design and layout from within the one template.</p>
                  </a>
                  <div id="filesCollapse" class="accordion-collapse collapse mb-4" data-bs-parent="#accordion">
                    <div class="row mt-5 accordion-body">
                      <div class="col-sm-12">
                        <input (change)="onFile($event)" class="btn btn-light btn-sm" type="file" multiple="true" accept="image/*" id="imageUploader">
                      </div>
                      <div class="col-sm-2 p-1" *ngFor="let img of images">
                        <img class="img-fluid" [src]="img" alt="Image Description">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
          
            <li class="step-item">
              <div class="step-content-wrapper">
                <span class="step-icon step-icon-soft-primary">4</span>
                <div class="step-content">
                  <a class="collapsed" data-bs-target="#advertCollapse" data-bs-toggle="collapse" aria-expanded="false">
                    <h4>Advert Info</h4>
                    <p class="step-text fs-12">Find what you need in one template and combine features at will.</p>
                  </a>
                  <div id="advertCollapse" class="accordion-collapse collapse" data-bs-parent="#accordion">
                    <br />
                    <div class="row accordion-body">
                      <div class="mb-3 col-md-12">
                          <label class="form-label">Ad Name / Title</label>
                          <input type="text" class="form-control" placeholder="Type something" formControlName="name">
                      </div>
                      <div class="mb-3 col-md-12">
                        <label class="form-label">Price</label>
                        <input type="text" class="form-control" placeholder="Type something" formControlName="price">
                      </div>
                      <div class="mb-3 col-md-6">
                          <label class="form-label">Brands</label>
                          <input type="text" formControlName="brands" class="form-control" placeholder="What brand is the listings ?.....">
                      </div>
                      <div class="mb-3 col-md-6">
                          <label class="form-label">Tags</label>
                          <input type="text" formControlName="tags" class="form-control tagin" data-tagin-placeholder="Add a tag... (then press enter)">
                      </div>
                      <div class="mb-3">
                          <label class="form-label">Description / Summary</label>
                          <textarea class="form-control" placeholder="..." rows="5" formControlName="description"></textarea>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </li>
          
            <li class="step-item">
              <div class="step-content-wrapper">
                <span class="step-icon step-icon-soft-primary">5</span>
                <div class="step-content">
                  <a class="collapsed" data-bs-target="#settingsCollapse" data-bs-toggle="collapse" aria-expanded="false">
                    <h4>Advert Settings</h4>
                    <p class="step-text fs-12">Find what you need in one template and combine features at will.</p>
                  </a>
                  <div id="settingsCollapse" class="accordion-collapse collapse" data-bs-parent="#accordion">
                    <br />
                    <div class="row accordion-body">
                      <div class="mb-3">
                          <div class="row">
                              <div class="col-md-5">
                                  <label class="form-label">Promote ad ?</label>
                                  <select class="form-control" formControlName="isFeatured" >
                                      <option value="false">No, this is a regular ad listing</option>
                                      <option value="true">Yes, I want to promote this ad listing</option>
                                  </select>
                              </div>
                              <div class="col-md-7" *ngIf="listingForm.value.isFeatured == 'true'">
                                  <label class="form-label">Featured season</label>
                                  <select class="form-control" formControlName="featuredName">
                                      <option value="" >Choose a promotional / featured season or type</option>
                                      <option value="general">General (Monthly subscription cost)</option>
                                      <!-- <option value="easter">Easter Promotion</option>
                                      <option value="xmas">Xmas Promotion</option> -->
                                  </select>
                              </div>
                          </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </li>
        </ul>


        <!-- Footer -->
        <div class="card-footer pt-0" *ngIf="listingForm.value.isFeatured == 'false'">
          <div class="d-flex justify-content-end gap-3">
              <button type="submit" class="btn btn-primary">Save Advert</button>
            </div>
        </div>
        <!-- End Footer -->
      </form>

      <div class="card-footer pt-0" *ngIf="listingForm.value.isFeatured == 'true'">
        <div class="d-flex justify-content-end gap-3">
          <angular4-paystack
            [email]="_orderservices?.paystackInfo?.email"
            [amount]="_orderservices?.paystackInfo?.amount"
            [ref]="_orderservices?.paystackInfo?.ref"
            [paystackOptions]="_orderservices?.paystackInfo"
            [channels]="_orderservices?.paystackInfo?.channel"
            [class]="'btn btn-primary hidden'"
            (onClose)="_orderservices?.paymentCancel($event)"
            (callback)="onSubmit(listingForm.value, $event)"
          >
            Subscribe to Featured Listing & Save Advert
          </angular4-paystack>
        </div>
      </div>

    </div>

</div>
